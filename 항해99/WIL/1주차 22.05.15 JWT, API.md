## 이번주 WIL(JWT,API) 대한 나의 생각

-  JWT 의 첫만남은 한 달전이다. 그 때 당시 나는 J의 약자가 JAVA인줄 알았다 이유는 자바에서만 사용하는 토큰인 줄 알았기 때문이다. 매우 부끄러운 일이다. 그 때 당시 JWT를 이용해 토큰을 만들어 로그인에 이용하는 로직을 프로그래밍해야 했는데 1시간에서 2시간 공부 후 로직까지 작성하는데 꽤 오래걸린 생각이든다. 물론 다 짜고나서 잘 작동하는 걸 확인하고 매우 뿌뜻했다. 하지만 아직 어렵다 라는 느낌을 지우기 어려웠지만 이번 항해99에서 JWT토큰을 이용해 한번 더 로그인을 구현하고 사용해보니 JWT과 어색함이 없어진 느낌이다.  
-  API이번 API정의서? 를 작성할 때 URL에 행위가 들어가 피드백을 받은 적이 있다 지금까지 내가 URL 설계를 잘 못하고 있었구나 라는 생각에 전에 했던 프로그래밍에 대해 부끄러움이 남았고 시간이 있으면 수정하는 시간도 가져야겠다 생각이 들었던거같다.

## JWT(Json Web Token)란?

-   JWT(Json Web Token)란 Json 포맷을 이용하여 사용자에 대한 속성을 저장하는 Claim 기반의 Web Token이다. JWT는 토큰 자체를 정보로 사용하는 Self-Contained 방식으로 정보를 안전하게 전달한다. 주로 회원 인증이나 정보 전달에 사용되는 JWT는 아래의 로직을 따라서 처리된다.[출처](https://mangkyu.tistory.com/56)\[MangKyu's Diary\]

## JWT구조

![](https://i2.wp.com/www.opennaru.com/wp-content/uploads/2018/08/JWT_Stacks.png?fit=1200%2C300)

-   JWT는 세 파트로 나누어지며, 각 파트는 점로 구분하여 xxxxx.yyyyy.zzzzz 이런식으로 표현됩니다. 순서대로 헤더 (Header), 페이로드 (Payload), 서명 (Sinature)로 구성합니다.  
    Base64 인코딩의 경우 “+”, “/”, “=”이 포함되지만 JWT는 URI에서 파라미터로 사용할 수 있도록 URL-Safe 한 Base64url 인코딩을 사용합니다.

## Header

-   토큰의 타입과 해시 암호화 알고리즘으로 구성되어 있습니다. 첫째는 토큰의 유형 (JWT)을 나타내고, 두 번째는 HMAC, SHA256 또는 RSA와 같은 해시 알고리즘을 나타내는 부분입니다.

## Payload

-   토큰에 담을 클레임(claim) 정보를 포함하고 있습니다. Payload 에 담는 정보의 한 ‘조각’ 을 클레임이라고 부르고, 이는 name / value 의 한 쌍으로 이뤄져있습니다. 토큰에는 여러개의 클레임 들을 넣을 수 있습니다.클레임의 정보는 등록된 (registered) 클레임, 공개 (public) 클레임, 비공개 (private) 클레임으로 세 종류가 있습니다.
-   Signature
-   secret key를 포함하여 암호화되어 있습니다

## JWT PROCESS

![](https://i1.wp.com/www.opennaru.com/wp-content/uploads/2018/08/jwt_process_image_v2.png?fit=1920%2C1080)

## JWT의 장점

-   JWT 의 주요한 이점은 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함하기 때문에 별도의 인증 저장소가 필요없다는 것입니다.
-   분산 마이크로 서비스 환경에서 중앙 집중식 인증 서버와 데이터베이스에 의존하지 않는 쉬운 인증 및 인가 방법을 제공합니다.
-   개별 마이크로 서비스에는 토큰 검증과 검증에 필요한 비밀 키를 처리하기위한 미들웨어가 필요합니다. 검증은 서명 및 클레임과 같은 몇 가지 매개 변수를 검사하는 것과 토큰이 만료되는 경우로 구성됩니다.
-   토큰이 올바르게 서명되었는지 확인하는 것은 CPU 사이클을 필요로하며 IO 또는 네트워크 액세스가 필요하지 않으며 최신 웹 서버 하드웨어에서 확장하기가 쉽습니다.
-   JSON 웹 토큰의 사용을 권장하는 몇 가지 이유는 다음과 같다.URL 파라미터와 헤더로 사용  
    수평 스케일이 용이  
    디버깅 및 관리가 용이  
    트래픽 대한 부담이 낮음  
    REST 서비스로 제공 가능  
    내장된 만료  
    독립적인 JWT

## JWT 단점

-   토큰은 클라이언트에 저장되어 데이터베이스에서 사용자 정보를 조작하더라도 토큰에 직접 적용할 수 없습니다.
-   더 많은 필드가 추가되면 토큰이 커질 수 있습니다.
-   상태 애플리케이션에서 토큰은 거의 모든 요청에 대해 전송되므로 데이터 트래픽 크기에 영향을 미칠 수 있습니다.

## API(Application Programming Interface)란?

-   API는 정의 및 프로토콜 집합을 사용하여 두 소프트웨어 구성 요소가 서로 통신할 수 있게 하는 메커니즘입니다.예를 들어, 기상청의 소프트웨어 시스템에는 일일 기상 데이터가 들어 있습니다. 휴대폰의 날씨 앱은 API를 통해 이 시스템과 "대화"하고 휴대폰에 매일 최신 날씨 정보를 표시합니다.

## API는 무엇을 의미하나요?

-   API는 Application Programming Interface(애플리케이션 프로그램 인터페이스)의 줄임말터페이스는 두 애플리케이션 간의 서비스 계약이라고 할 수 있습니다. 이 계약은 요청과 응답을 사용하여 두 애플리케이션이 서로 통신하는 방법을 정의합니다. API 문서에는 개발자가 이러한 요청과 응답을 구성하는 방법에 대한 정보가 들어 있습니다.

## API는 어떻게 작동하나요?

-   API 아키텍처는 일반적으로 클라이언트와 서버 측면에서 설명됩니다요청을 보내는 애플리케이션을 클라이언트  
    응답을 보내는 애플리케이션을 서버  
    날씨 예에서 기상청의 날씨 데이터베이스는 서버이고 모바일 앱은 클라이언트

## API가 생성된 시기와 이유에 따라 API는 네 가지 방식으로 작동

-   SOAP API이 API는 단순 객체 접근 프로토콜을 사용합니다. 클라이언트와 서버는 XML을 사용하여 메시지를 교환합니다. 과거에 더 많이 사용되었으며 유연성이 떨어지는 API입니다.
-   RPC API이 API를 원격 프로시저 호출이라고 합니다. 클라이언트가 서버에서 함수나 프로시저를 완료하면 서버가 출력을 클라이언트로 다시 전송합니다.
-   Websocket APISON 객체를 사용하여 데이터를 전달하는 또 다른 최신 웹 API 개발입니다. WebSocket API는 클라이언트 앱과 서버 간의 양방향 통신을 지원합니다. 서버가 연결된 클라이언트에 콜백 메시지를 전송할 수 있어 REST API보다 효율적입니다.
-   [REST API](https://github.com/whitewise95/TIL/blob/main/server/REST%20API.md)오늘날 웹에서 볼 수 있는 가장 많이 사용되고 유연한 API입니다. 클라이언트가 서버에 요청을 데이터로 전송합니다. 서버가 이 클라이언트 입력을 사용하여 내부 함수를 시작하고 출력 데이터를 다시 클라이언트에 반환합니다.

## API의 다른 유형

-   프라이빗 API프라이빗 API는 기업 내부에 있으며 비즈니스 내에서 시스템과 데이터를 연결하는 데만 사용됩니다.
-   퍼블릭 API퍼블릭 API는 일반에 공개되며 누구나 사용할 수 있습니다. 이러한 유형의 API와 관련된 권한 부여와 비용이 있을 수도 있고 없을 수도 있습니다.
-   파트너 APIB2B 파트너십을 지원하기 위해 권한이 부여된 외부 개발자만 액세스할 수 있습니다.
-   복합 API복합 API는 두 개 이상의 서로 다른 API를 결합하여 복잡한 시스템 요구 사항이나 동작을 처리합니다.
